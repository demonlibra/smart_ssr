Оптопара токовый прибор.
У оптопары есть коэффициент передачи.
Во входной диод вы пускает какой-то ток. 
Величина этого тока умноженная на коэффициент передачи даст ток по выходу оптопары.
Этот ток умножаете на сопротивление нагрузки оптопары и видите хватит ли этого сопротивления и этого тока чтобы обеспечить требуемый уровень для микроконтроллера

Например во входной диод вы пускание ток 1мА.
Коэффициент передачи оптопары, например, 0.5.
Получаем выходной ток оптопары 0.5мА.
При нагрузочном резисторе 1кОм.
Получаем размах напряжения на выходе всего лишь 0.5В.


Контроллер не сработает.

Можно увеличить сопротивление нагрузки оптопары до 10кОм, тогда получится размах 5В.

Можно увеличить входной ток через светодиод оптопары. При сетевом напряжении это может быть затруднительно, так как при увеличении тока у вас увеличится рассеиваемая мощность на резисторах и станет слишком большой.

Можно заменить оптопару на оптопару с большим коэффициентом передачи, например 2, но этого будет все равно мало

Ещё оптопары имеют свойство деградировать со временем. Через несколько лет коэффициент передачи оптопары станет меньше. И нужно учитывать это при выборе резистора. Хотя бы с двойным запасом


Внутренняя подтяжка в пределах 40 кОм +/- 30%

-----------------------------------------------------------------------

На входе L_IN синусоидальное напряжение.
Например, необходимо чтобы на входе PA0 устанавливался логический 0 при напряжения -10...+10 В
Падение напряжение на диодном мосту D1 (ABS6) 1.5 В
(10 - 1.5) / 102 кОм = 0.083 мА

Коэффициент передачи оптопары U1 (4N25) 0.2
Выходной ток оптопары 0.017 мА

Размах напряжения на выходе 0.017 мА х 10 кОм = 0.17 В