# Умное твердотельное реле с анализом ШИМ

### Ссылки:
- [Обсуждение в теме форума UNI](https://uni3d.store/viewtopic.php?t=527)
- [Как залить Sketch в Arduino?](https://alexgyver.ru/arduino-first)

Твердотельное реле Zero-Cross в процессе работы пропустит только те полупериоды синусоидального напряжения питания, начало которых совпадёт с импульсами сигнала ШИМ от платы управления. В результате будет получено три состояния: закрыто, открыто и открыто для одного полупериода. 


Например, при частоте питающего напряжения равной частоте ШИМ сигнала управления, т.е. 50 Гц, и коэффициент заполнения сигнала управления отличным от 1, можно говорить лишь о вероятности одного из трех состояний твердотельного реле.
- Коэффициент заполнения = 1 - полная мощность
- Коэффициент заполнения ≥ 0.5 - половина или полная мощность
- Коэффициент заполнения < 0.5 - 0 или половина мощности


Решить описанную проблему может следующее решение.


### Принцип работы:
1. Сигнал управления (ШИМ) с платы управления  поступает вход Arduino, которая определяет длительность импульсов включения и коэффициент заполнения ШИМ.
2. Димер подаёт на Arduino сигналы перехода синусоиды напряжения через 0 для определения моментов времени открытия симистора. Таким образом достигается синхронизация сигнала управления и напряжения питания.
3.  Arduino подаёт сигналы управления на димер для получения необходимой мощности, пропуская часть полупериодов синусоидального напряжения в единицу времени. Например, при сетевое напряжение с частотой 50 Гц имеет 100 полупериодов за одну секунду. Если за секунду пропустить только 30 из них, мы получим 30% мощности.
Дискретность задания мощности 1%.

![photo](https://github.com/demonlibra/smart_ssr/blob/master/arduino/dimmer+arduino.jpg)
![photo](https://github.com/demonlibra/smart_ssr/blob/master/digispark/smart_ssr_digispark.jpg)


### Данная схема позволяет:
- Решить проблему неадекватной работы обычного твердотельного реле.
- Обеспечить более точное поддержание температуры с грелками, мощность которых превышает необходимую в несколько раз.
- Задать ограничение мощности. Может быть актуально для мощных грелок, если стол искривляется от быстрого нагрева.
- Все элементы на виду. В китайской коробочке залитой компаундом и надписью SSR внутри может быть всё что угодно. На корпусе может быть указано 40А, при симисторе с максимальным током 12А внутри.

### Важно:
У большинства всё работает и без этого велосипеда. Не торопитесь реализовывать данную схему.
В большинстве случаев проблема управления твердотельным реле решается понижением частоты ШИМ меньше 10 Гц.
